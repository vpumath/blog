<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Math blog</title>
<link>https://vpumath.github.io/blog/</link>
<atom:link href="https://vpumath.github.io/blog/index.xml" rel="self" type="application/rss+xml"/>
<description>A math blog</description>
<generator>quarto-1.8.25</generator>
<lastBuildDate>Mon, 03 Nov 2025 22:00:00 GMT</lastBuildDate>
<item>
  <title>Finding multiple mathematical models for same phenomenon is a good thing</title>
  <dc:creator>Veli-Pekka Uusluoto</dc:creator>
  <link>https://vpumath.github.io/blog/posts/Finding_multiple_mathematical_models_for_same_phenomenon_is_a_good_thing/</link>
  <description><![CDATA[ 





<div class="hidden">

</div>
<p>Finding an unifying collection of equations and principles that would explain everything in the universe under single compatible framework would be a holy grail for physicists and mathematicians. With theory of everything, you could potentially predict everything which could be very useful. Let’s say that some day such theory is found. Are other models unneccesary after that? I would like to argue that knowing and finding other mathematical models is important even in that scenario (as it is useful to know/figure out multiple solutions for a problems and multiple proofs for a single theorem). I hope that with this I could show how to analyze mathematical models from human perspective: What would make mathematical models (or theories) easier or harder humans to learn/understand.</p>
<section id="mechanistical-model-of-a-system." class="level1">
<h1>“Mechanistical” model of a system.</h1>
<p>There are many kind of mathematical models, but now I want discuss “mechanistical” models of dynamical systems. The following is one way to think about dynamical systems and the world: Mathematical model of dynamical system consist of environment/space <img src="https://latex.codecogs.com/png.latex?%5Cmathcal%7BE%7D">, building blocks <img src="https://latex.codecogs.com/png.latex?%5Cmathcal%7BB%7D"> and dynamics between building blocks <img src="https://latex.codecogs.com/png.latex?%5Cmathcal%7BD%7D"> and a mathematical model of a system could be thought as a triple <img src="https://latex.codecogs.com/png.latex?(%5Cmathcal%7BE%7D,%5Cmathcal%7BB%7D,%20%5Cmathcal%7BD%7D)">. Additionally, when studying a system that evolve, the history of the system could be an important part of the model as it would describe why there are certain things in the system (this is one good idea in John H. Holland’s book Signals and boundaries).</p>
<p>The environment part of the model will describe the spatial/environmental aspects of a system and how we think that system interacts with outside world. For example, boundary conditions describes often how system interacts with outside world. Building blocks describe smallest parts of the system that we want to include to the model. For example building blocks of system might be particles, field quantities or agents. Dynamics of the system tells how we think that the building blocks of a system will interact with each other.</p>
<p>Many different models can describe a system equivalently or nearly equivalently and there isn’t an unique model for a system. This can be seen by a thought experiment: Let’s have a model that describe system to a desired precision. If we have another model that has smaller building blocks than previous model and we can build the bigger building blocks from smaller ones, then the models would produce nearly equivalent results in the scope of the model that has bigger building blocks. (Assuming that both models produce accurate results and models are applied in the scale where they are precise).</p>
<p>In a way, we notice that some mathematical models form a hierarchial/nested structure. In mathematical modelling there is at least two questions: What is the smallest building block in the model and what part or pheomenon of a system we want to understand or be able to predict. Sometimes, we don’t need to understand or model every part of a system or what happens between events and sometimes we need to: If we want to predict where a golf ball lands after a swing, we don’t necessarily need to model the dynamics of atmosphere, but if we study where a frisbee lands, then we may need to, at least in some accuracy.</p>
<p>This is true also while writing mathematics and proofs. We select what axioms we take for granted, what theorems and properties we assume to be known and what objects are already defined. Sometimes unpacking a proof with details can add clarity as it makes mental steps smaller. Sometimes it only confuses the reader as the journey takes longer and is messier. The above characterization can be little bit non-exact. Let me try to somehow formulate and “quantify” what I mean.</p>
</section>
<section id="tradeoffs-of-mathematical-models-and-human-limits." class="level1">
<h1>Tradeoffs of mathematical models and human limits.</h1>
<p>In every model, we have certain number of</p>
<ul>
<li>objects or building blocks,</li>
<li>dynamical laws and principles,</li>
<li>computational steps (computational load).</li>
</ul>
<p>When we look from human perspective, humans need to be capable to</p>
<ul>
<li>remember,</li>
<li>understand,</li>
<li>build and</li>
<li>apply</li>
</ul>
<p>the model at some level if they want to get the joy of understanding. One of the most limiting factors of humans is memory capabilities. If we want to achieve intellectually elegant model, finding a model that minimizes the amount of building blocks, dynamics and computational load of the model, would the best bet. Of course, without sacrificing the precision and the prediction capabilities of the model.</p>
<p>If we don’t care how enjoyable the model is and how much human understanding it provides about dynamical laws of the system, we can totally forget about minimizing the model since computer memory is cheap and we can go ham with it. For example, some AI models tend to be black box models (they work well, but we don’t know how and why they work).</p>
<p>For both, the selection of smallest building blocks determines the resolution of model: Often we can’t get results or understanding about phenomena or dynamics of a systems that are smaller than our smallest building block. If the building block are selected to be too small, achieving knowledge about much larger pheomena or dynamics may be computationally too demanding or slow even for the best computer.</p>
<p>When we return to think about a model that gives a theory of everything. I would guess that its smallest building blocks would be really small and thus computing anything about human size phenomena would be infeasible. Therefore, we need to continue to develop and learn different mathematical models. When learning or studying something, changing what one takes to be smallest building blocks can be really enlightening and make the journey easier.</p>


</section>

 ]]></description>
  <category>Mathematical modelling</category>
  <guid>https://vpumath.github.io/blog/posts/Finding_multiple_mathematical_models_for_same_phenomenon_is_a_good_thing/</guid>
  <pubDate>Mon, 03 Nov 2025 22:00:00 GMT</pubDate>
</item>
<item>
  <title>Expected value does not always tell the whole story</title>
  <dc:creator>Veli-Pekka Uusluoto</dc:creator>
  <link>https://vpumath.github.io/blog/posts/EV_doesnt_always_tell_whole_story/</link>
  <description><![CDATA[ 





<div class="hidden">

</div>
<p>In poker, there is a rule of thumb that you should play plus EV (Expected Value) lines and avoid negative EV lines and indeed it is important to play more plus EV lines than negative EV lines in the long run. However, expected value is a mathematical “measurement” that has its limitations and can be misleading sometimes. It would be really weird if just one number would be able to provide perfect information for decision making.</p>
<p>There are examples of cases where making plus EV decisions would be absolutely insane. Those cases are quite simple, but it can be instructive to see how one would construct such scenarios. Sometimes mathematics is all about building examples where things doesn’t work as one would imagine.</p>
<section id="basics-of-expected-value" class="level1">
<h1>Basics of expected value</h1>
<p>How one could end up with inventing expected value: Let’s start by considering a scenario that has two outcomes: The outcome <img src="https://latex.codecogs.com/png.latex?1"> has probability <img src="https://latex.codecogs.com/png.latex?p_1"> and a result <img src="https://latex.codecogs.com/png.latex?r_1."> The outcome <img src="https://latex.codecogs.com/png.latex?2"> has probability <img src="https://latex.codecogs.com/png.latex?p_2"> and a result <img src="https://latex.codecogs.com/png.latex?r_2."> How could we evaluate the scenario? Let start by two observations:</p>
<ul>
<li>If the result <img src="https://latex.codecogs.com/png.latex?r_1"> increases, then the evaluation should increase. The opposite should also be true.</li>
<li>If the probability of <img src="https://latex.codecogs.com/png.latex?p_1"> increases, the effect (weight) of the result should increase and if the probability goes to zero, the effect of that result should vanish.</li>
</ul>
<p>By multiplying <img src="https://latex.codecogs.com/png.latex?p_1"> and <img src="https://latex.codecogs.com/png.latex?r_1"> we get an object <img src="https://latex.codecogs.com/png.latex?p_1%20r_1"> that has above desired behaviour with respect of the first outcome. We can do this as well for the other outcome as well and get <img src="https://latex.codecogs.com/png.latex?p_2%20r_2">. By summing these two, we get some way to evaluate the result <img src="https://latex.codecogs.com/png.latex?R"> of the scenario: <img src="https://latex.codecogs.com/png.latex?%5Cmathbb%7BE%7D(R)%20=%20p_1%20r_1%20+%20p_2%20r_2."> This is called expected value of <img src="https://latex.codecogs.com/png.latex?R">. This can be generalized to the case when we have several outcomes. Let’s us have a scenario that has <img src="https://latex.codecogs.com/png.latex?N"> outcomes and outcome <img src="https://latex.codecogs.com/png.latex?k"> has probabilty <img src="https://latex.codecogs.com/png.latex?p_k"> and a result <img src="https://latex.codecogs.com/png.latex?r_k">, then the expected value of the result <img src="https://latex.codecogs.com/png.latex?R"> of the scenario is <img src="https://latex.codecogs.com/png.latex?%20%5Cmathbb%7BE%7D(R)%20=%20%5Csum_%7Bk=1%7D%5EN%20p_k%20r_k."> Each component of that sum has the desired behavior that we listed above. Furthermore, the expected value <img src="https://latex.codecogs.com/png.latex?%5Cmathbb%7BE%7D(R)"> as a whole has the property that if some probabilty <img src="https://latex.codecogs.com/png.latex?p_k%20=%201">, then <img src="https://latex.codecogs.com/png.latex?%5Cmathbb%7BE%7D(R)%20=%20r_k"> which is the behaviour that we would want from the evaluation (If we know that event <img src="https://latex.codecogs.com/png.latex?k"> is going to happen for sure, then the evaluation should be exactly the result <img src="https://latex.codecogs.com/png.latex?r_k">). Thus, the expected value <img src="https://latex.codecogs.com/png.latex?%5Cmathbb%7BE%7D(R)"> has a sensible behaviour. EV can be generalized to the case when there are (countably) infinitely many discrete cases and to the case when the random variable (result) is continuous, vector-valued or something even wilder.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>An elementary property of expected value in the discrete finite case
</div>
</div>
<div class="callout-body-container callout-body">
<p>Expected value is always between the smallest and largest value of the result (random variable). Constructing a proof (mathematical argument) for this is a great exercise if you haven’t made many proofs in your life. This property is also something that makes sense and is something that we would like to have.</p>
</div>
</div>
<p>Now, we can give scenarios some kind of evaluation about what to expect. One could think if EV is a good number in the context of scenario, then the scenario would be good, but this isn’t always the case.</p>
</section>
<section id="how-could-we-make-an-example-where-ev-behaves-unintuively" class="level1">
<h1>How could we make an example where EV behaves unintuively?</h1>
<p>In mathematics, one way to break things is to choose really large or really small numbers. We need to do both to produce an example. Let’s return to the scenario where we had two outcomes and set <img src="https://latex.codecogs.com/png.latex?r_1%20=%20-10"> (An entry fee of 10 units of money to a game which is lost if one loses). Let’s choose the prize of the game to be absolutely bonkers <img src="https://latex.codecogs.com/png.latex?r_2%20=%2010%5E%7B20%7D"> units of money and the probability of winning to be <img src="https://latex.codecogs.com/png.latex?p_2=10%5E%7B-10%7D">. Then the EV is</p>
<p><img src="https://latex.codecogs.com/png.latex?%20%5Cmathbb%7BE%7D(R)%20=%20(1-10%5E%7B-10%7D)%20%5Ccdot%20(-10)%20+%2010%5E%7B-10%7D%20%5Ccdot%2010%5E%7B20%7D%20=%20%2010%5E%7B10%7D%20-(1-10%5E%7B-10%7D)%20%5Ccdot%2010%20%20%5Capprox%2010%5E%7B10%7D.%20"></p>
<p>EV of approximately <img src="https://latex.codecogs.com/png.latex?10%5E%7B10%7D"> units of money is a decent amount money in any currency even in this current cost of living crisis. That is a good EV in my books and we could tinker it to be big as we want. But the problem is that probability of winning is so small that one would never win in that game, on average.</p>
<p>Out of the curiousness, let’s calculate how many tries it would take to win in that game, on average: The probability that we would win at try <img src="https://latex.codecogs.com/png.latex?k"> is <img src="https://latex.codecogs.com/png.latex?%5Cmathbb%7BP%7D(Q=k)%20=%20(1-p)%5E%7Bk-1%7Dp"> (we lose <img src="https://latex.codecogs.com/png.latex?k-1"> times and then win). Now we take a mathematical shortcut and use known results instead of calculating by hand: The random variable <img src="https://latex.codecogs.com/png.latex?Q"> has a geometric distribution which has expected value of <img src="https://latex.codecogs.com/png.latex?%5Cmathbb%7BE%7D(Q)%20=%20%5Cfrac%7B1%7D%7Bp%7D">. So it would take <img src="https://latex.codecogs.com/png.latex?%5Cfrac%7B1%7D%7B10%5E%7B-10%7D%7D=10%5E%7B10%7D"> tries, on average. A person that lives 100 years has about <img src="https://latex.codecogs.com/png.latex?3.1536%20%5Ccdot%2010%5E9"> seconds in their lives and that wouldn’t be enough if they played the game every second, on average.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>small differences in luck can make huge difference in life.
</div>
</div>
<div class="callout-body-container callout-body">
<p>From that math above: Let’s say that you have <img src="https://latex.codecogs.com/png.latex?1%5C%25"> chance to get a job, you need to make 100 quality applications, on average. If you can improve that by just <img src="https://latex.codecogs.com/png.latex?1%5C%25">, the average amount of number of applications needed decreases by 50. We can deduce that when things are hard, even small improvements can make a huge difference.</p>
<p>One can also see that even small differences in general luck between humans can lead to drastically different experience of life. Let’s say that person <img src="https://latex.codecogs.com/png.latex?1"> has general luck of <img src="https://latex.codecogs.com/png.latex?1%5C%25"> and person <img src="https://latex.codecogs.com/png.latex?2"> has general luck of <img src="https://latex.codecogs.com/png.latex?5%5C%25">, the difference in luck is only <img src="https://latex.codecogs.com/png.latex?4%5C%25">, but person <img src="https://latex.codecogs.com/png.latex?2"> has to make <img src="https://latex.codecogs.com/png.latex?80%5C%25"> less tries, on average.</p>
<p>Of course, these observations are only relevant in the situations when the probabilities are small.</p>
</div>
</div>
<p>I know that it is a bit funny to say beware of EV and then use the EV of geometric distribution to show why you need to be wary about EVs. The phrase “on average” has been doing the most of the heavy lifting during this blog post. What do we mean by “on average” and how we could determine how attainable the EV is?</p>
</section>
<section id="the-central-limit-theorem" class="level1">
<h1>The central limit theorem</h1>
<p>When we run same scenario <img src="https://latex.codecogs.com/png.latex?n"> times in a way where the runs are independent of each others, then we can study the average result, <img src="https://latex.codecogs.com/png.latex?A_n">, of the results:</p>
<p><img src="https://latex.codecogs.com/png.latex?%20A_n%20%20=%20%5Cfrac%7B%5Csum_%7Bk=1%7D%5En%20R_k%7D%7Bn%7D%20"></p>
<p>where the <img src="https://latex.codecogs.com/png.latex?R_k"> is the result of the <img src="https://latex.codecogs.com/png.latex?k">-th run and every <img src="https://latex.codecogs.com/png.latex?R_k"> will have the same distribution <img src="https://latex.codecogs.com/png.latex?R">. Now there exists a very famous theorem that connects the average result, <img src="https://latex.codecogs.com/png.latex?A_n">, to the expected value <img src="https://latex.codecogs.com/png.latex?%5Cmathbb%7BE%7D(R)">.</p>
<p><strong>The central limit theorem</strong> says the following: Assume that <img src="https://latex.codecogs.com/png.latex?R,%20R_1,R_2,%20%5Cdots,%20R_n"> are identially independently distributed random variables with finite expected value <img src="https://latex.codecogs.com/png.latex?%5Cmathbb%7BE%7D(R)"> and finite variance <img src="https://latex.codecogs.com/png.latex?%5Cmathrm%7BVar%7D(R)%20=%20%5Csigma%5E2">. Then as the <img src="https://latex.codecogs.com/png.latex?n"> grows, the distribution of <img src="https://latex.codecogs.com/png.latex?%5Cfrac%7BA_n%20-%20%5Cmathbb%7BE%7D(R)%7D%7B%5Cfrac%7B%5Csigma%7D%7B%5Csqrt%7Bn%7D%7D%7D"> converges in distribution to the normal distribution <img src="https://latex.codecogs.com/png.latex?%5Cmathcal%7BN%7D(0,1)"> and the same in the limit notation</p>
<p><img src="https://latex.codecogs.com/png.latex?%20%5Clim_%7Bn%20%5Cto%20%5Cinfty%7D%20%5Cfrac%7BA_n%20-%20%5Cmathbb%7BE%7D(R)%7D%7B%5Cfrac%7B%5Csigma%7D%7B%5Csqrt%7Bn%7D%7D%7D%20%5Cxrightarrow%7Bd%7D%20%5Cmathcal%7BN%7D(0,%201).%20"></p>
<p>Here <img src="https://latex.codecogs.com/png.latex?%5Csigma%5E2"> is the variance of <img src="https://latex.codecogs.com/png.latex?R">. Before we continue our journey to definition of variance, “couple” words about what this means. Basically, this means that when <img src="https://latex.codecogs.com/png.latex?n"> grows, we can approximate probability calculations about the average <img src="https://latex.codecogs.com/png.latex?A_n"> with the normal distribution <img src="https://latex.codecogs.com/png.latex?%5Cmathcal%7BN%7D(%5Cmathbb%7BE%7D(R),%20%5Cfrac%7B%5Csigma%5E2%7D%7Bn%7D)"> as the approximation.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Caution</span>An instructive silly goose moment No.&nbsp;1 (a bit advanced exercise)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>I tried to find/make a formulation of the central limit theorem that would say something like this</p>
<p><img src="https://latex.codecogs.com/png.latex?%20%5Clim_%7Bn%20%5Cto%20%5Cinfty%7D%20A_n%20%5Cxrightarrow%7Bd%7D%20%5Cmathcal%7BN%7D(%5Cmathbb%7BE%7D(R),%20%5Cfrac%7B%5Csigma%5E2%7D%7Bn%7D)%20"></p>
<p>as it would show better what happens to <img src="https://latex.codecogs.com/png.latex?A_n">, but then I realized that I was a really silly goose. Why is finding a formulation like this impossible?</p>
</div>
</div>
</div>
<p>Moreover, if the probability density function of <img src="https://latex.codecogs.com/png.latex?R"> for example is bounded, we can say that probability density function of <img src="https://latex.codecogs.com/png.latex?%5Cfrac%7BA_n%20-%20%5Cmathbb%7BE%7D(R)%7D%7B%5Cfrac%7B%5Csigma%7D%7B%5Csqrt%7Bn%7D%7D%7D"> converges pointwisely to the probability density function of the normal distribution <img src="https://latex.codecogs.com/png.latex?%5Cmathcal%7BN%7D(0,1)"> (the probability density function of <img src="https://latex.codecogs.com/png.latex?A_n"> will look like normal distribution at some point). This isn’t true for every random variable that fulfills the central limit theorem conditions, so we need to be delicate how we interpret the central limit theorem. Local limit theorems give conditions when the probability density function of <img src="https://latex.codecogs.com/png.latex?%5Cfrac%7BA_n%20-%20%5Cmathbb%7BE%7D(R)%7D%7B%5Cfrac%7B%5Csigma%7D%7B%5Csqrt%7Bn%7D%7D%7D"> converges pointwisely to the normal distribution <img src="https://latex.codecogs.com/png.latex?%5Cmathcal%7BN%7D(0,1)">. Additional information is available for example from <a href="https://mathoverflow.net/questions/5733/when-does-a-pointwise-clt-hold">here</a>, <a href="https://archive.org/details/gnedenko-kolmogorov-limit-distributions-for-sums-of-independent-random-variables/page/224/mode/2up">here</a> or from <a href="https://terrytao.wordpress.com/2015/11/19/275a-notes-5-variants-of-the-central-limit-theorem/">here</a>. (Not an expert on local limit theorems, so take my words with a grain of salt)</p>
<p>If there were terms or stuff that were unfamiliar or confusing, you can skip them and focus on “when n grows, the probability distribution of the average <img src="https://latex.codecogs.com/png.latex?A_n"> starts to behave like it would be normal distribution <img src="https://latex.codecogs.com/png.latex?%5Cmathcal%7BN%7D(%5Cmathbb%7BE%7D(R),%20%5Cfrac%7B%5Csigma%5E2%7D%7Bn%7D)">”. The exact way to handle technical details is a much longer story and we are not delving into it here. The most important observation is that the variance will decrease when <img src="https://latex.codecogs.com/png.latex?n"> grows. I think that the following interactive visualization is the best way to demonstrate how normal distribution look and how variance <img src="https://latex.codecogs.com/png.latex?%5Cfrac%7B%5Csigma%5E2%7D%7Bn%7D"> affect it.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb1" data-startfrom="106" data-source-offset="-1" style="background: #f1f3f5;"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 105;"><span id="cb1-106"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">square</span>(x){</span>
<span id="cb1-107"></span>
<span id="cb1-108">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb1-109">}</span>
<span id="cb1-110"></span>
<span id="cb1-111"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">range</span>(a<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> b<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> h) {</span>
<span id="cb1-112">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (h <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">throw</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">new</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Error</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Step size h must be positive'</span>)</span>
<span id="cb1-113">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Ensure we move in the right direction even if a &gt; b</span></span>
<span id="cb1-114">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> forward <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> b</span>
<span id="cb1-115">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> step <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> forward <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">?</span> h <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>h</span>
<span id="cb1-116">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> result <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb1-117"></span>
<span id="cb1-118">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Use a tolerance to avoid floating‑point drift (e.g., 0.1 + 0.2 ≠ 0.3 exactly)</span></span>
<span id="cb1-119">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> eps <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Math</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(step) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1e12</span></span>
<span id="cb1-120"></span>
<span id="cb1-121">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> (<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">let</span> v <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> a<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span> forward <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">?</span> v <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> eps <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> v <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> eps<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span> v <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+=</span> step) {</span>
<span id="cb1-122">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">// Round to a reasonable number of decimal places to hide FP artefacts</span></span>
<span id="cb1-123">    result<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">push</span>(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Number</span>(v<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">toFixed</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>)))</span>
<span id="cb1-124">  }</span>
<span id="cb1-125"></span>
<span id="cb1-126">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> result</span>
<span id="cb1-127">}</span>
<span id="cb1-128"></span>
<span id="cb1-129">x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">range</span>(<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb1-130"></span>
<span id="cb1-131">y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map</span>(x<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">normalPDF</span>(x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span>mu<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span>variance))<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb1-132"></span>
<span id="cb1-133"></span>
<span id="cb1-134"></span>
<span id="cb1-135"></span>
<span id="cb1-136"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">normalPDF</span>(x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> mu<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> var_) {</span>
<span id="cb1-137">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> sigma <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Math</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(var_)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb1-138">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> coefficient <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> (sigma <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Math</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Math</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">PI</span>))<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb1-139">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">const</span> exponent <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Math</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pow</span>(x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> mu<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> var_)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb1-140">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> coefficient <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">Math</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">exp</span>(exponent)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb1-141">}</span>
<span id="cb1-142"></span>
<span id="cb1-143"></span>
<span id="cb1-144">Plot<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>({</span>
<span id="cb1-145">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">marks</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> [</span>
<span id="cb1-146">    Plot<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">line</span>(</span>
<span id="cb1-147">      x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map</span>((d<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> i) <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">=&gt;</span> ({<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">x</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> d<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">y</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> y[i]}))<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-148">      {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">x</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">y</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"y"</span>}</span>
<span id="cb1-149">    )</span>
<span id="cb1-150">  ]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-151">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">x</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">label</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"X-axis"</span>}<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-152">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">y</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">label</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Y-axis"</span>}</span>
<span id="cb1-153">})</span></code></pre></div></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-6" data-nodetype="expression">

</div>
</div>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb2" data-startfrom="156" data-source-offset="-1054" style="background: #f1f3f5;"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 155;"><span id="cb2-156">viewof mu <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> Inputs<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">range</span>([<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">label</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"the expected value "</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">step</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>})<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-157">viewof variance <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> Inputs<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">range</span>([<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> {<span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">label</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Variance"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">step</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>})<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span></code></pre></div></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-8" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<p>So we can say that in the long run, the average result <img src="https://latex.codecogs.com/png.latex?A_n"> will converge to the expected value <img src="https://latex.codecogs.com/png.latex?%5Cmathbb%7BE%7D(R)">, i.e.</p>
<p><img src="https://latex.codecogs.com/png.latex?%20%5Clim_%7Bn%20%5Cto%20%5Cinfty%7D%20A_n%20%5Crightarrow%20%5Cmathbb%7BE%7D(R)."></p>
<p>This holds in sense of “convergence in probability” and “converges almost surely” and these kind of limit theorems are variants of law of large numbers theorems.</p>
<p>In general, there isn’t an exact way to tell how long it takes before the average converges to the expected value, but qualitatively we can say that the larger variance is, the larger probability to deviate from the expected value is at the beginning. The same is true for the question “when the normal distribution approximation is good enough?”.</p>
</section>
<section id="so-what-is-variance" class="level1">
<h1>So, what is variance?</h1>
<p>I think that the central limit theorem shows why variance is an important quantity. The variance, <img src="https://latex.codecogs.com/png.latex?%5Cmathrm%7BVar%7D(R)">, of random result (variable) <img src="https://latex.codecogs.com/png.latex?R"> is defined as follows</p>
<p><img src="https://latex.codecogs.com/png.latex?%20%5Cmathrm%7BVar%7D(R)%20=%20%5Cmathbb%7BE%7D%5B(R-%5Cmathbb%7BE%7D(R))%5E2%5D.%20"></p>
<p>Let us write this for the case when we have finite number results <img src="https://latex.codecogs.com/png.latex?r_1,r_2,%5Cdots,%20r_N"> with probabilities <img src="https://latex.codecogs.com/png.latex?p_1,p_2,%5Cdots%20p_N"> respectively:</p>
<p><img src="https://latex.codecogs.com/png.latex?%20%5Cmathrm%7BVar%7D(R)%20=%20%5Csum_%7Bk=1%7D%5EN%20p_k(r_k%20-%20%5Cmathbb%7BE%7D(R))%5E2.%20"></p>
<p>In a way, variance studies how far away every potential result is from expected value and the distance is weighted by the probability of the result and these quantities are summed together. There are multiple potential choices for “distance function”. For example, one could use <img src="https://latex.codecogs.com/png.latex?%7CR-%5Cmathbb%7BE%7D(R)%7C"> as well, but the square function produces the most useful properties for the variance.</p>
<p>Let’s calculate the variance in our unintuitive case (using the approximated EV, <img src="https://latex.codecogs.com/png.latex?%5Cmathbb%7BE%7D(R)%20%5Capprox%2010%5E%7B10%7D">)</p>
<p><img src="https://latex.codecogs.com/png.latex?%20%5Cmathrm%7BVar%7D(R)%20%5Capprox%20(1-10%5E%7B-10%7D)%5Ccdot%20(-10-10%5E%7B10%7D)%5E2%20+%2010%5E%7B-10%7D%20%5Ccdot%20(10%5E%7B20%7D%20-%2010%5E%7B10%7D)%5E2%20%5Capprox%2010%5E%7B30%7D.%20"> For some odd reason, I would guess that with this variance the convergence to expected value might take a while.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>You can also use Chebyshev’s inequality to estimate what is the probability of getting results that are at least certain distance from the expected value
</div>
</div>
<div class="callout-body-container callout-body">
<p>The Chebyshev’s inequality says that for a random variable <img src="https://latex.codecogs.com/png.latex?R"> with <img src="https://latex.codecogs.com/png.latex?%5Cmathbb%7BE%7D(%7CR%7C)%20%3C%20%5Cinfty"> and finite variance the following inequality holds</p>
<p><img src="https://latex.codecogs.com/png.latex?%20%5Cmathbb%7BP%7D(%7CR-%5Cmathbb%7BE%7D(R)%7C%20%5Cgeq%20a%20)%20%5Cleq%20%5Cfrac%7B%5Cmathrm%7BVar%7D(R)%7D%7Ba%5E2%7D."></p>
<p>This gives a crude way to estimate probabilities, but this gives an upper bound for the probabilities without making assumptions about convergence or other stuff. Also, it is good enough for proving weak law of large numbers.</p>
</div>
</div>
<p>What could we learn here? If someone says to you that here is an opportunity with a great EV, the question “what is the variance of the said opportunity?” would be a really good question to figure out. The next good question would be “What is the 95% confidence interval of the said opportunity?”, but that question is another story for another time.</p>


</section>

 ]]></description>
  <category>Probability</category>
  <guid>https://vpumath.github.io/blog/posts/EV_doesnt_always_tell_whole_story/</guid>
  <pubDate>Mon, 27 Oct 2025 22:00:00 GMT</pubDate>
</item>
</channel>
</rss>
